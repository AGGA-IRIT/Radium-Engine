<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: API: Camera manipulation in Radium</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">fd9e7909fbe48ed62b8ba2926782071167107f59</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('develCameraManipulator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">API: Camera manipulation in Radium </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md39">Implementing a CameraManipulator</a></li>
<li class="level1"><a href="#autotoc_md40">Using a CameraManipulator</a></li>
</ul>
</div>
<div class="textblock"><p>The Radium Engine provides some classes that allow to extend the way one might interact with a camera in an application.</p>
<p>The class <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> defines the general interface for camera manipulator. All manipulators have common properties that allow to switch from one manipulator to one other without disturbing the visual and interactive behavior of the application.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Implementing a CameraManipulator</h1>
<p>In order to extend the set of <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> available in Radium or to develop a dedicated <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> for a <code><a class="el" href="classRa_1_1Gui_1_1Viewer.html">Ra::Gui::Viewer</a></code>-based application, programmers are intended to do the following, demonstrated by the class <code>FlightCameraManipulator</code>.</p>
<ol type="1">
<li>Define the class that must inherits from <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> and, in order to receive interaction events, from <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a></code>. Note that a CameraManipulator is a <code>Q_OBJECT</code></li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="RaGuiBase_8hpp.html#a488a6591ba8e25137ef4a512659e12f3">RA_GUIBASE_API</a> FlightCameraManipulator : <span class="keyword">public</span> <a class="code" href="classRa_1_1Gui_1_1CameraManipulator.html">Ra::Gui::CameraManipulator</a>,</div>
<div class="line">                                               <span class="keyword">public</span> <a class="code" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a>&lt;FlightCameraManipulator&gt;</div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line">...</div>
<div class="line">};</div>
</div><!-- fragment --><ol type="1">
<li>Implement the constructors (default, copy). Note that it is also very important to implement a constructor that will take any <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> and will copy the base class before initializing the current manipulator.</li>
</ol>
<div class="fragment"><div class="line">FlightCameraManipulator::FlightCameraManipulator( <span class="keyword">const</span> <a class="code" href="classRa_1_1Gui_1_1CameraManipulator.html">Ra::Gui::CameraManipulator</a>&amp; other ) :</div>
<div class="line">    <a class="code" href="namespaceRa.html">Ra</a>::Gui::CameraManipulator( other ),</div>
<div class="line">    m_rotateAround( true ),</div>
<div class="line">    m_cameraRotateMode( false ),</div>
<div class="line">    m_cameraPanMode( false ),</div>
<div class="line">    m_cameraZoomMode( false ) {</div>
<div class="line">    m_flightSpeed = ( m_target - m_camera-&gt;getPosition() ).<a class="code" href="namespaceOpenMesh.html#a8205f789ce08919bc11c58383574596c">norm</a>() / 10_ra;</div>
<div class="line">    initializeFixedUpVector();</div>
<div class="line">}</div>
</div><!-- fragment --><ol type="1">
<li>Implement the <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a></code> part of the class. This implies defining the method <code>void FlightCameraManipulator::configureKeyMapping_impl()</code> according to the semantic imposed by <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a></code>. It is recommended that, when implementing this keymapping initialisation callback, a default configuration is defined and saved to the xml keymapping configuration file if this later does not already contains a configuration. This will allow the users to edit and customize the proposed keymapping configuration.</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#define KMA_VALUE( XX ) Gui::KeyMappingManager::KeyMappingAction Gui::FlightCameraManipulator::XX;</span></div>
<div class="line"><a class="code" href="FlightCameraManipulator_8hpp.html#a548a2cdef611b0b5977e76ddc6f4cb3f">KeyMappingFlightManipulator</a></div>
<div class="line"><span class="preprocessor">#undef KMA_VALUE</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> FlightCameraManipulator::configureKeyMapping_impl() {</div>
<div class="line">    m_keyMappingContext =</div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;getContext( <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span> );</div>
<div class="line">    <span class="keywordflow">if</span> ( m_keyMappingContext.isInvalid() )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// The context is undefined, add a default configuration to the keymapping stystem</span></div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction(</div>
<div class="line">            <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;LeftButton&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;FLIGHTMODECAMERA_ROTATE&quot;</span> );</div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction( <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;ShiftModifier&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;LeftButton&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;FLIGHTMODECAMERA_PAN&quot;</span> );</div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction( <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;ControlModifier&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;LeftButton&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">                                                          <span class="stringliteral">&quot;FLIGHTMODECAMERA_ZOOM&quot;</span> );</div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction(</div>
<div class="line">            <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span>, <span class="stringliteral">&quot;Key_A&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;FLIGHTMODECAMERA_ROTATE_AROUND&quot;</span> );</div>
<div class="line">        m_keyMappingContext =</div>
<div class="line">            Ra::Gui::KeyMappingManager::getInstance()-&gt;getContext( <span class="stringliteral">&quot;FlightManipulatorContext&quot;</span> );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define KMA_VALUE( XX ) \</span></div>
<div class="line"><span class="preprocessor">    XX = Ra::Gui::KeyMappingManager::getInstance()-&gt;getActionIndex( m_keyMappingContext, #XX );</span></div>
<div class="line">    <a class="code" href="FlightCameraManipulator_8hpp.html#a548a2cdef611b0b5977e76ddc6f4cb3f">KeyMappingFlightManipulator</a></div>
<div class="line"><span class="preprocessor">#undef KMA_VALUE</span></div>
<div class="line"><span class="preprocessor">}</span></div>
</div><!-- fragment --><ol type="1">
<li>Implement the inherited abstract method according to the wanted behavior of the <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code></li>
</ol>
<h1><a class="anchor" id="autotoc_md40"></a>
Using a CameraManipulator</h1>
<p>Using a <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators.">Ra::Gui::CameraManipulator</a></code> in a <code><a class="el" href="classRa_1_1Gui_1_1Viewer.html">Ra::Gui::Viewer</a></code>-based application is quite straightforward.</p>
<p>If one wants to set a first camera manipulator to a viewer </p><div class="fragment"><div class="line">myViewer-&gt;setCameraManipulator(</div>
<div class="line">        <span class="keyword">new</span> FlightCameraManipulator( width, height );</div>
</div><!-- fragment --><p>If one wants to change the manipulator while keeping the actual visual state </p><div class="fragment"><div class="line">myViewer-&gt;setCameraManipulator(</div>
<div class="line">        <span class="keyword">new</span> FlightCameraManipulator( *( m_viewer-&gt;getCameraManipulator() ) ) );</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="anamespaceRa_html"><div class="ttname"><a href="namespaceRa.html">Ra</a></div><div class="ttdoc">This file contains definitions of aliases for basic vector classes and functions.</div><div class="ttdef"><b>Definition:</b> <a href="BulgeCorrection_8cpp_source.html#l00005">BulgeCorrection.cpp:5</a></div></div>
<div class="ttc" id="aclassRa_1_1Gui_1_1KeyMappingManageable_html"><div class="ttname"><a href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a></div><div class="ttdef"><b>Definition:</b> <a href="KeyMappingManager_8hpp_source.html#l00193">KeyMappingManager.hpp:193</a></div></div>
<div class="ttc" id="aclassRa_1_1Gui_1_1CameraManipulator_html"><div class="ttname"><a href="classRa_1_1Gui_1_1CameraManipulator.html">Ra::Gui::CameraManipulator</a></div><div class="ttdoc">The CameraManipulator class is the generic class for camera manipulators.</div><div class="ttdef"><b>Definition:</b> <a href="CameraManipulator_8hpp_source.html#l00027">CameraManipulator.hpp:27</a></div></div>
<div class="ttc" id="aFlightCameraManipulator_8hpp_html_a548a2cdef611b0b5977e76ddc6f4cb3f"><div class="ttname"><a href="FlightCameraManipulator_8hpp.html#a548a2cdef611b0b5977e76ddc6f4cb3f">KeyMappingFlightManipulator</a></div><div class="ttdeci">#define KeyMappingFlightManipulator</div><div class="ttdef"><b>Definition:</b> <a href="FlightCameraManipulator_8hpp_source.html#l00074">FlightCameraManipulator.hpp:74</a></div></div>
<div class="ttc" id="aRaGuiBase_8hpp_html_a488a6591ba8e25137ef4a512659e12f3"><div class="ttname"><a href="RaGuiBase_8hpp.html#a488a6591ba8e25137ef4a512659e12f3">RA_GUIBASE_API</a></div><div class="ttdeci">#define RA_GUIBASE_API</div><div class="ttdoc">Defines the correct macro to export dll symbols.</div><div class="ttdef"><b>Definition:</b> <a href="RaGuiBase_8hpp_source.html#l00011">RaGuiBase.hpp:11</a></div></div>
<div class="ttc" id="anamespaceOpenMesh_html_a8205f789ce08919bc11c58383574596c"><div class="ttname"><a href="namespaceOpenMesh.html#a8205f789ce08919bc11c58383574596c">OpenMesh::norm</a></div><div class="ttdeci">Derived::Scalar norm(Eigen::MatrixBase&lt; Derived &gt; const &amp;v1)</div><div class="ttdef"><b>Definition:</b> <a href="OpenMesh_8hpp_source.html#l00022">OpenMesh.hpp:22</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="develmanual.html">Developer manual</a></li><li class="navelem"><a class="el" href="api.html">API</a></li><li class="navelem"><a class="el" href="gui.html">Gui</a></li>
    <li class="footer">Generated on Wed Jan 27 2021 14:06:12 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
